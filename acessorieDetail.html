<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kumar+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./input.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&family=Kumar+One&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
    
    <!-- Swiper.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    
    <style>
        .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }
        .error-message {
            color: red;
            font-size: 0.875em;
            margin-top: 0.25em;
            display: none;
        }
    </style>
</head>
<body id="detailBody">
    <a href="https://wa.me/923127044201?text=Hi%2C%20I%20want%20to%20place%20an%20order" class="whatsaapIcon" target="_blank">
         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 175.216 175.552"><defs><linearGradient id="b" x1="85.915" x2="86.535" y1="32.567" y2="137.092" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#57d163"></stop><stop offset="1" stop-color="#23b33a"></stop></linearGradient><filter id="a" width="1.115" height="1.114" x="-.057" y="-.057" color-interpolation-filters="sRGB"><feGaussianBlur stdDeviation="3.531"></feGaussianBlur></filter></defs><path fill="#b3b3b3" d="m54.532 138.45 2.235 1.324c9.387 5.571 20.15 8.518 31.126 8.523h.023c33.707 0 61.139-27.426 61.153-61.135.006-16.335-6.349-31.696-17.895-43.251A60.75 60.75 0 0 0 87.94 25.983c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.312-6.179 22.558zm-40.811 23.544L24.16 123.88c-6.438-11.154-9.825-23.808-9.821-36.772.017-40.556 33.021-73.55 73.578-73.55 19.681.01 38.154 7.669 52.047 21.572s21.537 32.383 21.53 52.037c-.018 40.553-33.027 73.553-73.578 73.553h-.032c-12.313-.005-24.412-3.094-35.159-8.954zm0 0" filter="url(#a)"></path><path fill="#fff" d="m12.966 161.238 10.439-38.114a73.42 73.42 0 0 1-9.821-36.772c.017-40.556 33.021-73.55 73.578-73.55 19.681.01 38.154 7.669 52.047 21.572s21.537 32.383 21.53 52.037c-.018 40.553-33.027 73.553-73.578 73.553h-.032c-12.313-.005-24.412-3.094-35.159-8.954z"></path><path fill="url(#linearGradient1780)" d="M87.184 25.227c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.312-6.179 22.559 23.146-6.069 2.235 1.324c9.387 5.571 20.15 8.518 31.126 8.524h.023c33.707 0 61.14-27.426 61.153-61.135a60.75 60.75 0 0 0-17.895-43.251 60.75 60.75 0 0 0-43.235-17.929z"></path><path fill="url(#b)" d="M87.184 25.227c-33.733 0-61.166 27.423-61.178 61.13a60.98 60.98 0 0 0 9.349 32.535l1.455 2.313-6.179 22.558 23.146-6.069 2.235 1.324c9.387 5.571 20.15 8.517 31.126 8.523h.023c33.707 0 61.14-27.426 61.153-61.135a60.75 60.75 0 0 0-17.895-43.251 60.75 60.75 0 0 0-43.235-17.928z"></path><path fill="#fff" fill-rule="evenodd" d="M68.772 55.603c-1.378-3.061-2.828-3.123-4.137-3.176l-3.524-.043c-1.226 0-3.218.46-4.902 2.3s-6.435 6.287-6.435 15.332 6.588 17.785 7.506 19.013 12.718 20.381 31.405 27.75c15.529 6.124 18.689 4.906 22.061 4.6s10.877-4.447 12.408-8.74 1.532-7.971 1.073-8.74-1.685-1.226-3.525-2.146-10.877-5.367-12.562-5.981-2.91-.919-4.137.921-4.746 5.979-5.819 7.206-2.144 1.381-3.984.462-7.76-2.861-14.784-9.124c-5.465-4.873-9.154-10.891-10.228-12.73s-.114-2.835.808-3.751c.825-.824 1.838-2.147 2.759-3.22s1.224-1.84 1.836-3.065.307-2.301-.153-3.22-4.032-10.011-5.666-13.647"></path></svg>
      </a>
  
      <div class="banner">
        <p>Enjoy! Free Shipping - Easy Return & Refund</p>
      </div>
      <nav class="container">
        <div class="navMain">
        <div class="navContainer">
  
     
            <div class="categorySelect">
              <a href="./male.html">Men</a>
              <a href="./female.html">Women</a>
              <a href="./uniSex.html">UniSex</a>
            </div>
   
          
          <div onclick="openNav()" class="menuContainer">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="menuIcon"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
          </div>
          <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
              >&times;</a
            >
            <a href="./male.html">Men</a>
            <a href="./female.html">Women</a>
            <a href="./uniSex.html">UniSex</a>
          </div>
          <a href="./index.html" class="mainLogo">WristnNeck</a>

          
          <div class="iconContainer">
            <a style="display: flex;" class="loginButton" id="profileLink">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="iconNav" id="loginIcon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
              </svg>
            </a>
            
            <a href="./addCart.html" class="cartLink">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="iconNav">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
              </svg>
              <span id="cartCount">0</span>
          </a>
          </div>
  
        </div>
      </div>
      </nav>
    <div class="accessorieDetailPageContainer">
        <button onclick="goBack()" class="backHomeButton">Go Back</button>
        <div class="accessorieDetailContainer">
            <!-- Swiper Slider -->
            <div class="swiper">
                <div class="swiper-wrapper" id="productImages"></div>
                <!-- Pagination & Navigation -->
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
            <div class="detailAcceories">
                <h1 id="productName" class="detailAcceroieName"></h1>
                <p class="detailAccresoriePrice"><strong style="color: white;">Price- </strong> PKR <span id="productPrice"></span></p>
                <p class="accrsorieOff"><span id="productDiscount"></span></p>
                <p id="productDescription"></p>
                <form>
                    <label class="detailLabel">Enter Quantity</label>
                    <input type="number" id="quantity" placeholder="Quantity" class="inputType" value="1">
                    <div class="selectColorContainer">
                        <label>Select Color -</label>
                        <div class="selectColorMain">
                            <div class="goldenColor selectColor" data-color="golden"></div>
                            <div class="blackColor selectColor" data-color="black"></div>
                            <div class="silverColor selectColor" data-color="silver"></div>
                        </div>
                    </div>
                    <button onclick="buyNow()" type="button" class="buyNowBtn">
                        Buy Now
                    </button>
                    <button type="button" class="addToCart" id="addToCartBtn">Add to Cart</button>
                </form>
            </div>
        </div>
    </div>
    <footer>
        <a href="./index.html" class="mainLogo">WristnNeck</a>
        <div class="footerMain">
          <div class="footerPage">
          <a href="./termsAndCondition.html">
            Terms And Contions
          </a>
          <a href="./aboutUs.html">
            About Us
          </a>
        </div>
        <div class="footerIcon">
          <a href="https://www.instagram.com/wristnneck.pk?igsh=OHdhcWNqNnpsOWlj">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path fill="currentColor" fill-rule="evenodd" d="M3 8a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v8a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V8Zm5-3a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H8Zm7.597 2.214a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2h-.01a1 1 0 0 1-1-1ZM12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6Zm-5 3a5 5 0 1 1 10 0 5 5 0 0 1-10 0Z" clip-rule="evenodd"/>
            </svg>
            
          </a>
          <a href="https://wa.me/923127044201?text=Hi%2C%20I%20want%20to%20place%20an%20order">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path fill="currentColor" fill-rule="evenodd" d="M12 4a8 8 0 0 0-6.895 12.06l.569.718-.697 2.359 2.32-.648.379.243A8 8 0 1 0 12 4ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10a9.96 9.96 0 0 1-5.016-1.347l-4.948 1.382 1.426-4.829-.006-.007-.033-.055A9.958 9.958 0 0 1 2 12Z" clip-rule="evenodd"/>
              <path fill="currentColor" d="M16.735 13.492c-.038-.018-1.497-.736-1.756-.83a1.008 1.008 0 0 0-.34-.075c-.196 0-.362.098-.49.291-.146.217-.587.732-.723.886-.018.02-.042.045-.057.045-.013 0-.239-.093-.307-.123-1.564-.68-2.751-2.313-2.914-2.589-.023-.04-.024-.057-.024-.057.005-.021.058-.074.085-.101.08-.079.166-.182.249-.283l.117-.14c.121-.14.175-.25.237-.375l.033-.066a.68.68 0 0 0-.02-.64c-.034-.069-.65-1.555-.715-1.711-.158-.377-.366-.552-.655-.552-.027 0 0 0-.112.005-.137.005-.883.104-1.213.311-.35.22-.94.924-.94 2.16 0 1.112.705 2.162 1.008 2.561l.041.06c1.161 1.695 2.608 2.951 4.074 3.537 1.412.564 2.081.63 2.461.63.16 0 .288-.013.4-.024l.072-.007c.488-.043 1.56-.599 1.804-1.276.192-.534.243-1.117.115-1.329-.088-.144-.239-.216-.43-.308Z"/>
            </svg>              
          </a>
        </div>
        </div>
        <div class="footerContactLink">
          <a href="https://mail.google.com/mail/u/0/?tab=rm&ogbl#inbox?compose=new">
            writnneck786@gmail.com
          </a>
          <a href="https://wa.me/923127044201?text=Hi%2C%20I%20want%20to%20place%20an%20order">
            +92 312 7044201
          </a>
        </div>
      </footer>
    <div id="modalBuyNow" class="modalMainContainer" style="top: -150%; transition: all 0.5s ease;">
        <div class="modalDataContainer hideScroll">
            <button type="button" style="background-color: transparent; cursor: pointer; position: absolute; top: 20px; right:20px; border: none;" onclick="cancelBtn()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="" style="width:20px; height: 20px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
              </svg>
            </button>
              
            <form class="formBuyNow">
                <div>
                    <label>Name</label>
                    <input type="text" id="name" placeholder="Enter Name"/>
                    <div id="nameError" class="error-message">Name is required</div>
                </div>
                <div>
                    <label>Phone Number</label>
                    <input type="number" id="phoneNumber" placeholder="Enter Phone Number"/>
                    <div id="phoneError" class="error-message">Phone number is required</div>
                </div>
                <div>
                    <label>Email</label>
                    <input type="email" id="email" placeholder="Enter Email"/>
                    <div id="emailError" class="error-message">Email is required</div>
                </div>
                <div>
                    <label>City</label>
                    <input type="text" id="cityInput" placeholder="Enter City"/>
                    <div id="cityError" class="error-message">City is required</div>
                </div>
                <div>
                    <label>Address</label>
                    <input type="text" id="address" placeholder="Enter Address, Street"/>
                    <div id="addressError" class="error-message">Address is required</div>
                </div>
                
                <div class="confirmedResult">
                    <label>Confirmed Quantity-</label>
                    <div style="font-size: 20px; font-weight: 700;" id="quantityValue"></div>
                </div>
                <div class="confirmedResult">
                    <label>Selected Color</label>
                    <div style="font-size: 20px; font-weight: 700;" id="selectedColor"></div>
                </div>
                <div class="confirmedResult">
                    <label>Total Item Price</label>
                   <div style="font-size: 20px; font-weight: 700;" id="itemsTotalPrice"></div>
                </div>
                <div class="confirmedResult">
                    <label>Shipping Value</label>
                   <div style="font-size: 20px; font-weight: 700;" id="shippingValue">Free</div>
                </div>
                <div class="confirmedResult">
                    <label>Total Price</label>
                   <div style="font-size: 20px; font-weight: 700;" id="FullPrice"></div>
                </div>
                <button type="button" onclick="payNow()" class="payNowBtn">
                    Buy Now
                </button>
                <button type="button" onclick="cancelBtn()" class="cancelBtn"> Cancel </button>
            </form>
        </div>
    </div>

<div id="waitingPopup" class="modalMainContainer" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center;">
  <div style="background-color: white; padding: 20px; border-radius: 10px; text-align: center;">
      <p>Processing your order...</p>
      <div class="spinner"></div>
  </div>
</div>

 
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
     window.onclick = function (event) {
    const loginModal = document.getElementById("loginModal");
    const signUpModal = document.getElementById("signUpModal");
  
    if (event.target === loginModal) {
      loginModal.style.display = "none";
    }
    if (event.target === signUpModal) {
      signUpModal.style.display = "none";
    }
  };
  
  // Open and Close Navigation
  const mainHome = document.getElementById("mainHome");
  console.log(mainHome); // Should log the mainHome element
  
  function openNav() {
    document.getElementById("mySidenav").style.width = "195px";
    document.getElementById("mySidenav").style.left = "16px";
    document.getElementById("mainHome").style.zIndex = "-1"; // Ensure it's visible
  }
  
  function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("mySidenav").style.left = "-20%";
    document.getElementById("mainHome").style.zIndex = "auto";
  }
  
  document.addEventListener("DOMContentLoaded", () => {
    const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
  
    // Update the profile link based on login status
    const profileLink = document.querySelector("#profileLink");
    if (profileLink) {
      if (isLoggedIn) {
        profileLink.href = "./logout.html";
        profileLink.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="iconNav" id="loginIcon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
          </svg> <p>Logout</p>
        `;
      } else {
        profileLink.href = "./login.html";
        profileLink.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="iconNav" id="loginIcon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
          </svg> <p>Login</p>
        `;
      }
    }
  });
document.addEventListener("DOMContentLoaded", () => {
    const product = JSON.parse(localStorage.getItem("selectedProduct"));

    if (product) {
        document.getElementById("productName").textContent = product.name;
        document.getElementById("productPrice").textContent = product.price;
        document.getElementById("productDiscount").textContent = product.discount ? `OFF ${product.discount}%` : "";
        document.getElementById("productDescription").textContent = product.description || "No description available";

        const imageGallery = document.getElementById("productImages");
        imageGallery.innerHTML = ""; // Clear previous images

        if (product.images && product.images.length > 0) {
            product.images.forEach(imageSrc => {
                const slide = document.createElement("div");
                slide.className = "swiper-slide";
                slide.innerHTML = `<img src="${imageSrc}" alt="${product.name}">`;
                imageGallery.appendChild(slide);
            });

            // Initialize Swiper
            new Swiper('.swiper', {
                loop: true,
                spaceBetween: 10,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
            });
        } else {
            imageGallery.innerHTML = "<p>No Image Available</p>";
        }
    }

    // Color Selection Logic
    const colorOptions = document.querySelectorAll(".selectColor");
    const selectedColorText = document.getElementById("selectedColorText");
    let selectedColor = "";

    colorOptions.forEach(color => {
        color.addEventListener("click", () => {
            // Remove 'selected' class from all
            colorOptions.forEach(c => c.classList.remove("selected"));

            // Add 'selected' class to the clicked one
            color.classList.add("selected");

            // Update selected color text
            selectedColor = color.getAttribute("data-color");
            selectedColorText.textContent = selectedColor.charAt(0).toUpperCase() + selectedColor.slice(1);
        });
    });
});

document.addEventListener("DOMContentLoaded", () => {
    const colorOptions = document.querySelectorAll(".selectColor");
    const selectedColorText = document.getElementById("selectedColor");

    let selectedColor = "";

    colorOptions.forEach(color => {
        color.addEventListener("click", () => {
            // Remove 'selected' class from all
            colorOptions.forEach(c => c.classList.remove("selected"));

            // Add 'selected' class to the clicked one
            color.classList.add("selected");

            // Update selected color text
            selectedColor = color.getAttribute("data-color");
            selectedColorText.textContent = selectedColor.charAt(0).toUpperCase() + selectedColor.slice(1);
        });
    });
});

function goBack() {
    window.history.back();
}

document.addEventListener("DOMContentLoaded", () => {
    const addToCartBtn = document.getElementById("addToCartBtn");
    const cartCountElement = document.getElementById("cartCount");
    const productName = document.getElementById("productName").textContent;
    const productPrice = document.getElementById("productPrice").textContent;
    const quantityInput = document.getElementById("quantity");
    const colorOptions = document.querySelectorAll(".selectColor");

    // Initialize cart from localStorage or create a new one
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Function to update cart count in the navbar
    function updateCartCount() {
        // Calculate total items in the cart
        const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
        cartCountElement.textContent = totalItems;
        localStorage.setItem("cartCount", totalItems); // Store total items in localStorage
    }
    // Function to check if the product is already in the cart
    function isProductInCart() {
        return cart.some(item => item.name === productName);
    }

    function addProductToCart() {
    const selectedColor = document.querySelector(".selectColor.selected")?.getAttribute("data-color") || "default";
    const quantity = parseInt(quantityInput.value) || 1;
    const productImage = document.querySelector(".swiper-slide img")?.src || "default-image.jpg"; // Ensure this is correct

    const product = {
        name: productName,
        price: productPrice,
        color: selectedColor,
        quantity: quantity,
        image: productImage // Ensure this is set correctly
    };

    cart.push(product);
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    addToCartBtn.textContent = "Added to Cart";
}
    // Function to remove product from the cart
    function removeProductFromCart() {
        cart = cart.filter(item => item.name !== productName);
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        addToCartBtn.textContent = "Add to Cart";
    }

    // Initialize button state based on cart contents
    if (isProductInCart()) {
        addToCartBtn.textContent = "Added to Cart";
    }

    // Update cart count on page load
    updateCartCount();

    // Add event listener to the "Add to Cart" button
    addToCartBtn.addEventListener("click", () => {
        if (isProductInCart()) {
            removeProductFromCart();
        } else {
            addProductToCart();
        }
    });

    // Color selection logic
    colorOptions.forEach(color => {
        color.addEventListener("click", () => {
            // Remove 'selected' class from all
            colorOptions.forEach(c => c.classList.remove("selected"));

            // Add 'selected' class to the clicked one
            color.classList.add("selected");
        });
    });
});

let modalBuyNow = document.getElementById("modalBuyNow");
let detailBody = document.getElementById("detailBody")

function clearFormFields() {
    // Clear input fields
    document.getElementById("name").value = "";
    document.getElementById("phoneNumber").value = "";
    document.getElementById("email").value = "";
    document.getElementById("cityInput").value = "";
    document.getElementById("address").value = "";
    document.getElementById("quantity").value = "1";

    // Clear selected color
    const colorOptions = document.querySelectorAll(".selectColor");
    colorOptions.forEach(color => color.classList.remove("selected"));
    document.getElementById("selectedColor").textContent = "";

    // Hide error messages
    document.getElementById("nameError").style.display = "none";
    document.getElementById("phoneError").style.display = "none";
    document.getElementById("emailError").style.display = "none";
    document.getElementById("cityError").style.display = "none";
    document.getElementById("addressError").style.display = "none";
}

function cancelBtn() {
    clearFormFields();
    modalBuyNow.style.top = "-150%";
    detailBody.style.overflow = "auto";
}

function buyNow() {
    const quantityInput = document.getElementById("quantity");
    const quantityValue = document.getElementById("quantityValue");
    const itemsTotalPrice = document.getElementById("itemsTotalPrice");
    const shippingValueElement = document.getElementById("shippingValue");
    const fullPriceElement = document.getElementById("FullPrice");
    const productPrice = document.getElementById("productPrice").textContent;
    const quantity = quantityInput.value || 1;

    // Get the selected color
    const selectedColor = document.querySelector(".selectColor.selected")?.getAttribute("data-color") || "default";
    const selectedColorText = document.getElementById("selectedColor");
    selectedColorText.textContent = selectedColor.charAt(0).toUpperCase() + selectedColor.slice(1);

    // Calculate total price
    const totalPrice = parseFloat(productPrice) * parseInt(quantity);
    const shippingPrice = parseFloat(shippingValueElement.textContent) || 0;
    const fullPrice = totalPrice + shippingPrice;

    // Update modal content
    quantityValue.textContent = quantity;
    itemsTotalPrice.textContent = `PKR ${totalPrice.toFixed(2)}`;
    fullPriceElement.textContent = `PKR ${fullPrice.toFixed(2)}`;

    if (modalBuyNow.style.top === "-150%") {
        modalBuyNow.style.top = "0";
        detailBody.style.overflow = "hidden";
        window.scrollTo({ top: 0, behavior: "smooth" });
    } else {
        modalBuyNow.style.top = "-150%";
        detailBody.style.overflow = "auto";
    }
}

function validateForm() {
    let isValid = true;

    const fields = [
        { id: "name", errorId: "nameError" },
        { id: "phoneNumber", errorId: "phoneError" },
        { id: "email", errorId: "emailError" },
        { id: "cityInput", errorId: "cityError" },
        { id: "address", errorId: "addressError" }
    ];

    fields.forEach(({ id, errorId }) => {
        const value = document.getElementById(id).value.trim();
        const errorElement = document.getElementById(errorId);
        
        if (!value) {
            errorElement.style.display = "block";
            isValid = false;
        } else {
            errorElement.style.display = "none";
        }
    });

    // Validate phone number (optional: min length)
    const phone = document.getElementById("phoneNumber").value.trim();
    if (phone.length < 10) {
        document.getElementById("phoneError").textContent = "Enter a valid phone number";
        document.getElementById("phoneError").style.display = "block";
        isValid = false;
    }

    return isValid;
}


async function payNow() {
    if (!validateForm()) {
        return; // Stop execution if form is invalid
    }

    const waitingPopup = document.getElementById("waitingPopup");
    waitingPopup.style.display = "flex";

    // Collect form data
    const orderDetails = {
        name: document.getElementById("name").value.trim(),
        phoneNumber: document.getElementById("phoneNumber").value.trim(),
        email: document.getElementById("email").value.trim(),
        city: document.getElementById("cityInput").value.trim(),
        address: document.getElementById("address").value.trim(),
        productName: document.getElementById("productName").textContent,
        quantity: document.getElementById("quantityValue").textContent,
        selectedColor: document.getElementById("selectedColor").textContent,
        totalPrice: document.getElementById("FullPrice").textContent,
        productImages: Array.from(document.querySelectorAll(".swiper-slide img")).map(img => img.src)
    };

    try {
      const response = await fetch('https://script.google.com/macros/s/AKfycbzKkcFpJJ-5zrcY88ecKbCf8dLYIeqJVrM8cHUN1KXi84g0wjoMxO0QPtvsyymk91NIDQ/exec', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(orderDetails)
});

        const result = await response.json();
        waitingPopup.style.display = "none"; // Hide loading indicator

        if (result.success) {
            localStorage.setItem("orders", JSON.stringify([...JSON.parse(localStorage.getItem("orders") || "[]"), orderDetails]));
            alert('Order placed successfully! An email has been sent.');
            clearFormFields();
        } else {
            alert('Failed to send email. Please try again.');
        }
    } catch (error) {
        waitingPopup.style.display = "none";
        alert('An error occurred. Please try again.');
    }
}


function clearFormFields() {
    // Clear input fields
    document.getElementById("name").value = "";
    document.getElementById("phoneNumber").value = "";
    document.getElementById("email").value = "";
    document.getElementById("cityInput").value = "";
    document.getElementById("address").value = "";
    document.getElementById("quantity").value = "1";

    // Clear selected color
    const colorOptions = document.querySelectorAll(".selectColor");
    colorOptions.forEach(color => color.classList.remove("selected"));
    document.getElementById("selectedColor").textContent = "";

    // Hide error messages
    document.getElementById("nameError").style.display = "none";
    document.getElementById("phoneError").style.display = "none";
    document.getElementById("emailError").style.display = "none";
    document.getElementById("cityError").style.display = "none";
    document.getElementById("addressError").style.display = "none";
}


    </script>
    
</body>
</html>